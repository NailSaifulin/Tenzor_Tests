Реализованы два сценария
Пытался сделать третий, работает только в не headless режиме с оговорками 